(this.webpackJsonpskscorer=this.webpackJsonpskscorer||[]).push([[0],[,,,,,,,,,function(e,t,n){e.exports=n(20)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a,r=n(0),l=n.n(r),c=n(7),o=n.n(c),i=(n(14),n(1)),u=(n(15),n(8));!function(e){e[e.NotYet=1]="NotYet",e[e.Bidding=2]="Bidding",e[e.Playing=3]="Playing",e[e.Completed=4]="Completed"}(a||(a={}));var d=a,s=(n(16),function(e){var t=e.cardCount,n=e.prevRoundScore,a=e.roundMode,c=e.player,o=e.recordBid,s=e.recordScore,m=e.trickPlayedAction,b=e.undoTrickPlayedAction,p=e.tricksPlayed,y=e.winning,g=e.startingPlayer,E=e.legendaryExpansionInPlay,f=Object(r.useState)(0),v=Object(i.a)(f,2),k=v[0],S=v[1],O=Object(r.useState)(0),h=Object(i.a)(O,2),j=h[0],C=h[1],P=Object(r.useState)(0),w=Object(i.a)(P,2),N=w[0],A=w[1],B=Object(u.a)(Array(t+1).keys()),x=Object(r.useState)(0),R=Object(i.a)(x,2),I=R[0],_=R[1],F=function(e){_(e)},K=Object(r.useState)(0),M=Object(i.a)(K,2),U=M[0],J=M[1];Object(r.useEffect)((function(){if(a===d.Completed){var e=function(e,t,n,a,r){var l=0;return r>0&&(l=t===n?r:-r),0===t?0===n?10*e+l:-10*e+l:t!==n?10*-Math.abs(t-n)+l:20*n+a+l}(t,k,j,N,I);s(c,e+n),J(e)}}),[a,k,N,c,U,n,s,t,j,I]);var L=function(e){S(Math.max(0,Math.min(k+e,t)))},T=y?"rgba(255,215,0,0.6)":g&&a===d.Bidding?"rgba(25,25,200,0.6)":"";return l.a.createElement("td",{className:"PlayerRound",style:{width:160,backgroundColor:T},key:c+t},a===d.Bidding&&l.a.createElement("div",{title:g?"Starts round":""},B.map((function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{key:c+e,type:"radio",name:c,id:c+e,value:e,onClick:function(){var t;S(t=e),o(c,t)}}),l.a.createElement("label",{key:c+e+"L",htmlFor:c+e},e),"\xa0",l.a.createElement("br",null))}))),(a===d.Completed||a===d.Playing)&&l.a.createElement(l.a.Fragment,null,l.a.createElement("span",null,"Bid: ",k," "),l.a.createElement("span",null,"Won: ",j," "),I>0&&l.a.createElement("div",null,"Bet: ",I),a===d.Playing&&l.a.createElement("div",null,p<t&&l.a.createElement("button",{onClick:function(){C(j+1),m()}},"Add Trick"),j>0&&l.a.createElement("button",{onClick:function(){C(j-1),b()}},"Undo Trick"),E&&j>0&&l.a.createElement("div",{className:"dropdown"},l.a.createElement("button",{className:"dropdownbutton"},l.a.createElement("img",{style:{backgroundColor:"white"},alt:"Pirate played",width:16,src:"/SkullKingScorer/Skull-And-Crossbones-Remix.svg"})),l.a.createElement("div",{className:"dropdown-content"},l.a.createElement("div",null,"Use Harry the Giant"),l.a.createElement("div",{className:"dropdown-option",onClick:function(){return L(1)}},"Raise bid by 1"),l.a.createElement("div",{className:"dropdown-option",onClick:function(){return L(-1)}},"Lower bid by 1"),l.a.createElement("div",null,"Use Rascal of Roatan "),l.a.createElement("div",{className:"dropdown-option",onClick:function(){return F(10)}},"Bet 10 points"),l.a.createElement("div",{className:"dropdown-option",onClick:function(){return F(20)}},"Bet 20 points")))),a===d.Playing&&p===t&&k===j&&l.a.createElement("div",null,l.a.createElement("input",{placeholder:"Bonus",type:"number",style:{width:48},min:"0",step:"10",onChange:function(e){A(Number(e.target.value))}}))),a===d.Completed&&l.a.createElement(l.a.Fragment,null,N>0&&l.a.createElement("div",null,"Bonus: ",N),l.a.createElement("div",null,"Score: ",U),l.a.createElement("div",null,"Total: ",U+n)))}),m=n(3);m.a.initialize("UA-166808776-1");var b=function(e){var t=e.cardCount,n=e.players,a=e.prevRoundScores,c=e.currentRound,o=e.roundCompleteAction,u=e.winningPlayers,b=e.startingPlayer,p=e.legendaryExpansionInPlay,y=Object(r.useState)(c<t?d.NotYet:c===t?d.Bidding:d.Completed),g=Object(i.a)(y,2),E=g[0],f=g[1],v=Object(r.useState)({}),k=Object(i.a)(v,2),S=k[0],O=k[1],h=Object(r.useState)(!1),j=Object(i.a)(h,2),C=j[0],P=j[1],w=Object(r.useState)(0),N=Object(i.a)(w,2),A=N[0],B=N[1],x=function(e,t){S[e]=t,O(S);var a=!0,r=0;n.forEach((function(e){void 0===S[e]?a=!1:r+=S[e]})),P(a),B(r)},R=Object(r.useState)({}),I=Object(i.a)(R,2),_=I[0],F=I[1],K=function(e,t){_[e]=t,F(_)};Object(r.useEffect)((function(){f(c<t?d.NotYet:c===t?d.Bidding:d.Completed)}),[t,c]);var M=Object(r.useState)(0),U=Object(i.a)(M,2),J=U[0],L=U[1],T=function(){L(J+1)},Y=function(){L(J-1),f(d.Playing)},G=Object(r.useState)(!1),z=Object(i.a)(G,2),W=z[0],H=z[1];return l.a.createElement("tr",{className:"Round"},l.a.createElement("td",{key:"cardCount"},t,!C&&c===t&&l.a.createElement("div",null,"Enter bids")),n.map((function(e){return l.a.createElement(s,{key:e+t,cardCount:t,trickPlayedAction:T,undoTrickPlayedAction:Y,tricksPlayed:J,prevRoundScore:a&&a[e]?a[e]:0,roundMode:E,player:e,recordBid:x,recordScore:K,winning:u.includes(e)&&t===c-1,startingPlayer:b===e,legendaryExpansionInPlay:p})})),l.a.createElement("td",{style:{width:50,border:"none"}},E===d.Bidding&&C&&l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{onClick:function(){f(d.Playing),1===c&&m.a.event({action:"game_started",category:"game_activity",label:"Players: "+n})}},"Start Round"),l.a.createElement("div",{style:{width:100}},A===t?"Bids at par":A<t?"Bids "+(t-A)+" under":"Bids "+(A-t)+" over")),E===d.Playing&&J<t&&!W&&p&&l.a.createElement("button",{onClick:function(){H(!0),T()}},"Kraken Played"),E===d.Playing&&J===t&&l.a.createElement("button",{onClick:function(){f(d.Completed),o(_)}},"Round done")))};n(19);m.a.initialize("UA-166808776-1");var p=function(e){var t=e.players,n=e.deletePlayerAction,a=e.startGameAction,c=e.legendaryExpansionInPlay,o=Object(r.useState)(1),u=Object(i.a)(o,2),d=u[0],s=u[1],p=Object(r.useState)([]),y=Object(i.a)(p,2),g=y[0],E=y[1],f=Object(r.useState)([]),v=Object(i.a)(f,2),k=v[0],S=v[1],O=function(e){1===d&&a(),g[d]=e,E(g),10===d?m.a.event({action:"game_completed",category:"game_activity",label:"Winners: "+k+" Scores: "+g[d]}):s(d+1)},h=Object(r.useState)(0),j=Object(i.a)(h,2),C=j[0],P=j[1];return Object(r.useEffect)((function(){var e=0;if(d>1){var t=d-1;for(var n in g[t])g[t][n]>e?(k=[n],e=g[t][n]):g[t][n]===e&&k.push(n);S(k)}}),[g,d]),l.a.createElement(l.a.Fragment,null,1===d?l.a.createElement("h4",null,"click player name to highlight as starting player"):"",l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Round"),t.map((function(e){return l.a.createElement("th",{key:e,onClick:function(){return function(e){if(1===d){var n=0,a={};t.forEach((function(e){a[e]=n++})),P(a[e])}}(e)}},e,"\xa0",1===d&&l.a.createElement("button",{onClick:function(){n(e)}},"\u2717"))})))),l.a.createElement("tbody",null,[1,2,3,4,5,6,7,8,9,10].map((function(e){return l.a.createElement(b,{key:e,cardCount:e,players:t,prevRoundScores:e>1?g[e-1]:null,currentRound:d,roundCompleteAction:O,winningPlayers:k,startingPlayer:t[(C+e-1)%t.length],legendaryExpansionInPlay:c})})))))};var y=function(){var e=localStorage.getItem("players"),t=["Player 1","Player 2","Player 3"];e&&(t=JSON.parse(e));var n=Object(r.useState)(t),a=Object(i.a)(n,2),c=a[0],o=a[1],u=Object(r.useState)(""),d=Object(i.a)(u,2),s=d[0],m=d[1],b=Object(r.useState)(!1),y=Object(i.a)(b,2),g=y[0],E=y[1],f=Object(r.useState)(!1),v=Object(i.a)(f,2),k=v[0],S=v[1],O=Object(r.useState)("true"===localStorage.getItem("legendaryExpansionInPlay")),h=Object(i.a)(O,2),j=h[0],C=h[1];Object(r.useEffect)((function(){return window.addEventListener("beforeunload",P),function(){window.removeEventListener("beforeunload",P)}}),[]);var P=function(e){e.preventDefault(),e.returnValue=""};return l.a.createElement("div",{className:"App"},l.a.createElement("div",{className:"App-body"},l.a.createElement("h1",null,"Ye New Skull King Scoresheet"),!g&&!k&&l.a.createElement("div",null,l.a.createElement("input",{id:"legendary_expansion_cb",type:"checkbox",checked:j,onChange:function(e){C(!j),localStorage.setItem("legendaryExpansionInPlay",String(!j))},title:"Adds support for the Kraken and Harry the Giant cards"}),l.a.createElement("label",{htmlFor:"legendary_expansion_cb"},"Use Legendary Expansion"),l.a.createElement("button",{onClick:function(){E(!0)}},"Add player")),g&&l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{type:"text",placeholder:"name",onChange:function(e){m(e.target.value)}}),l.a.createElement("button",{onClick:function(){c.push(s),o(c),E(!1),localStorage.setItem("players",JSON.stringify(c))}},"OK")),l.a.createElement(p,{players:c,deletePlayerAction:function(e){o(c.filter((function(t){return t!==e}))),localStorage.setItem("players",JSON.stringify(c.filter((function(t){return t!==e}))))},startGameAction:function(){S(!0)},legendaryExpansionInPlay:j}),l.a.createElement("br",null),l.a.createElement("div",{style:{fontSize:11}},"\xa9 2020 Craig Fisher ",l.a.createElement("a",{href:"https://twitter.com/craigfis",target:"_blank",rel:"noopener noreferrer"},"@craigfis"),l.a.createElement("br",null),l.a.createElement("a",{href:"https://github.com/Craigfis/SkullKingScorer",target:"_blank",rel:"noopener noreferrer"},"https://github.com/Craigfis/SkullKingScorer"),l.a.createElement("br",null),l.a.createElement("a",{href:"https://www.grandpabecksgames.com/products-skull-king",target:"_blank",rel:"noopener noreferrer"},"What is Skull King?"))))};o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(y,null)),document.getElementById("root"))}],[[9,1,2]]]);
//# sourceMappingURL=main.b8fc2d43.chunk.js.map